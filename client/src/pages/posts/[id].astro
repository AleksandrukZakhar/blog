---
import Layout from "../../layouts/Layout.astro";
import Post from "../../components/Post";
import Comments from "../../components/Comments";

const { id } = Astro.params;

const response = await fetch(`http://localhost:8080/post?postId=${id}`);
const res = await response.json();
const post = res.post[0];

const commentsResponse = await fetch(
    `http://localhost:8080/comments?postId=${id}`
);
const commentsRes = await commentsResponse.json();
const comments = commentsRes.result[0].comments;
---

<Layout title="Welcome to Astro.">
    <Post client:visible post={post} />
    <Comments client:visible id={id} comments={comments} />
</Layout>
